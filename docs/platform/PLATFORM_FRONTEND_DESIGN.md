# LingNexus Platform - å®Œæ•´å‰ç«¯åŠŸèƒ½è®¾è®¡

## ğŸ¯ äº§å“æ„¿æ™¯

**æ ¸å¿ƒç†å¿µ**ï¼š"ä» Skills åˆ°èƒ½åŠ›çš„æ¡¥æ¢" - è®©ç”¨æˆ·èƒ½å¤Ÿè½»æ¾å‘ç°ã€ç»„åˆå’Œä½¿ç”¨ Skillsï¼Œæ„å»ºå¼ºå¤§çš„ AI èƒ½åŠ›ã€‚

---

## ğŸ“Š äº§å“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LingNexus Platform                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚Skills Market â”‚  â”‚Agent Builder â”‚  â”‚Workflow      â”‚     â”‚
â”‚  â”‚   Place      â”‚  â”‚   Studio     â”‚  â”‚   Studio     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â†“                  â†“                  â†“              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  My Skills   â”‚  â”‚  My Agents   â”‚  â”‚  My          â”‚     â”‚
â”‚  â”‚  (æ”¶è—)      â”‚  â”‚  (æˆ‘çš„ä»£ç†)  â”‚  â”‚  Workflows   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Execution Engine                        â”‚  â”‚
â”‚  â”‚  (æ‰§è¡Œå¼•æ“ - åè°ƒ Skills, Agents, Workflows)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Analytics & Community                   â”‚  â”‚
â”‚  â”‚  (ä½¿ç”¨ç»Ÿè®¡ã€è¯„åˆ†ã€æ¨èã€å›¢é˜Ÿåä½œ)                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1. Skills Marketplace 2.0

### 1.1 é¦–é¡µè®¾è®¡

```vue
<template>
  <div class="skills-marketplace">
    <!-- æœç´¢æ  -->
    <div class="search-section">
      <el-input
        v-model="searchQuery"
        placeholder="æœç´¢ Skills..."
        prefix-icon="Search"
        size="large"
        style="max-width: 500px"
      />
      <el-select v-model="selectedCategory" placeholder="å…¨éƒ¨åˆ†ç±»" style="width: 150px">
        <el-option label="å…¨éƒ¨åˆ†ç±»" value="" />
        <el-option label="åŒ»è¯" value="medical" />
        <el-option label="æ–‡æ¡£" value="document" />
        <el-option label="æ•°æ®" value="data" />
        <el-option label="å®¢æœ" value="service" />
      </el-select>
      <el-button type="primary" @click="$router.push('/skills/my')">â­ æˆ‘çš„æ”¶è—</el-button>
    </div>

    <!-- å¿«é€Ÿå¼€å§‹åœºæ™¯ -->
    <div class="quick-start">
      <h2>ğŸ¯ å¿«é€Ÿå¼€å§‹ - é€‰æ‹©åœºæ™¯ï¼Œä¸€é”®åˆ›å»º</h2>
      <el-row :gutter="20">
        <el-col :span="8">
          <el-card class="scenario-card" @click="filterByScenario('document')">
            <div class="scenario-icon">ğŸ“„</div>
            <h3>æ–‡æ¡£å¤„ç†</h3>
            <p>12 Skills</p>
          </el-card>
        </el-col>
        <el-col :span="8">
          <el-card class="scenario-card" @click="filterByScenario('data')">
            <div class="scenario-icon">ğŸ“Š</div>
            <h3>æ•°æ®åˆ†æ</h3>
            <p>8 Skills</p>
          </el-card>
        </el-col>
        <el-col :span="8">
          <el-card class="scenario-card" @click="filterByScenario('service')">
            <div class="scenario-icon">ğŸ’¬</div>
            <h3>å®¢æœåŠ©æ‰‹</h3>
            <p>15 Skills</p>
          </el-card>
        </el-col>
      </el-row>
    </div>

    <!-- çƒ­é—¨ Skills -->
    <div class="section">
      <h2>ğŸ”¥ çƒ­é—¨ Skills</h2>
      <el-row :gutter="20">
        <el-col :span="24" v-for="skill in hotSkills" :key="skill.id">
          <el-card class="skill-card">
            <div class="skill-header">
              <h3>{{ skill.name }}</h3>
              <el-tag :type="getCategoryTagType(skill.category)">
                {{ getCategoryLabel(skill.category) }}
              </el-tag>
            </div>
            <div class="skill-meta">
              <span>ğŸ‘¤ {{ skill.creator_name }}</span>
              <span>â­ {{ skill.rating }} ({{ skill.rating_count }})</span>
              <span>ğŸ‘ï¸ {{ skill.usage_count }}</span>
            </div>
            <p class="skill-description">{{ skill.description }}</p>
            <div class="skill-actions">
              <el-button type="primary" @click="trySkill(skill)">ğŸ’¬ ç«‹å³è¯•ç”¨</el-button>
              <el-button @click="createAgentFromSkill(skill)">ğŸš€ åˆ›å»º Agent</el-button>
              <el-button @click="viewSkillDetail(skill)">ğŸ“– æŸ¥çœ‹è¯¦æƒ…</el-button>
            </div>
          </el-card>
        </el-col>
      </el-row>
    </div>

    <!-- æˆ‘çš„éƒ¨é—¨ Skills -->
    <div class="section" v-if="teamSkills.length > 0">
      <h2>ğŸ“š æˆ‘çš„éƒ¨é—¨ ({{ userDepartment }})</h2>
      <!-- ç±»ä¼¼ä¸Šé¢çš„å¡ç‰‡åˆ—è¡¨ -->
    </div>

    <!-- å®˜æ–¹æ¨è Skills -->
    <div class="section">
      <h2>âœ¨ å®˜æ–¹æ¨è</h2>
      <!-- å®˜æ–¹è®¤è¯çš„ Skills -->
    </div>
  </div>
</template>
```

### 1.2 Skill è¯¦æƒ…é¡µ

```vue
<template>
  <div class="skill-detail">
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <div class="detail-header">
      <h1>{{ skill.name }}</h1>
      <div class="meta-info">
        <el-tag :type="getCategoryTagType(skill.category)">
          {{ getCategoryLabel(skill.category) }}
        </el-tag>
        <el-tag v-if="skill.is_official" type="success">âœ¨ å®˜æ–¹è®¤è¯</el-tag>
        <el-tag :type="skill.sharing_scope === 'public' ? 'success' : 'info'">
          {{ getScopeLabel(skill.sharing_scope) }}
        </el-tag>
      </div>
    </div>

    <!-- è¯„åˆ†å’Œä½¿ç”¨ç»Ÿè®¡ -->
    <div class="stats-section">
      <el-rate v-model="skill.rating" disabled show-score />
      <span>{{ skill.rating_count }} æ¡è¯„ä»·</span>
      <span>ğŸ‘ï¸ {{ skill.usage_count }} æ¬¡ä½¿ç”¨</span>
    </div>

    <!-- åŠŸèƒ½æè¿° -->
    <div class="description-section">
      <h2>ğŸ“ åŠŸèƒ½æè¿°</h2>
      <p>{{ skill.description }}</p>

      <!-- å¦‚æœæœ‰å®˜æ–¹æ–‡æ¡£ -->
      <div v-if="skill.documentation" class="documentation">
        <h3>ğŸ“– ä½¿ç”¨æ–‡æ¡£</h3>
        <pre>{{ skill.documentation }}</pre>
      </div>
    </div>

    <!-- ç«‹å³è¯•ç”¨ -->
    <div class="try-section">
      <h2>ğŸ’¬ ç«‹å³è¯•ç”¨ (æ— éœ€ç™»å½•)</h2>
      <el-card>
        <el-input
          v-model="trialMessage"
          type="textarea"
          :rows="4"
          placeholder="è¾“å…¥è¦æµ‹è¯•çš„å†…å®¹..."
        />
        <el-button
          type="primary"
          :loading="executing"
          @click="trySkill"
          style="margin-top: 10px"
        >
          ğŸ’¬ æ‰§è¡Œ
        </el-button>
      </el-card>

      <!-- æ‰§è¡Œç»“æœ -->
      <div v-if="trialResult" class="trial-result">
        <el-alert
          :type="trialResult.status === 'success' ? 'success' : 'error'"
          :title="trialResult.status === 'success' ? 'æ‰§è¡ŒæˆåŠŸ' : 'æ‰§è¡Œå¤±è´¥'"
          show-icon
          :closable="false"
        >
          <pre>{{ trialResult.output || trialResult.error }}</pre>
        </el-alert>
      </div>
    </div>

    <!-- åˆ›å»º Agent -->
    <div class="create-agent-section">
      <h2>ğŸš€ åˆ›å»ºæˆ‘çš„ Agent</h2>
      <el-card>
        <el-form :model="agentForm" label-width="100px">
          <el-form-item label="Agent åç§°">
            <el-input v-model="agentForm.name" placeholder="ä¾‹å¦‚ï¼šMy Analyzer" />
          </el-form-item>
          <el-form-item label="Agent ç±»å‹">
            <el-radio-group v-model="agentForm.agent_type">
              <el-radio label="react">ReAct Agent (æ¨ç†+è¡ŒåŠ¨)</el-radio>
              <el-radio label="progressive">Progressive Agent (æ¸è¿›å¼)</el-radio>
            </el-radio-group>
          </el-form-item>
          <el-form-item label="æ¨¡å‹é€‰æ‹©">
            <el-select v-model="agentForm.model_name">
              <el-option label="Qwen Max (æ¨è)" value="qwen-max" />
              <el-option label="Qwen Plus" value="qwen-plus" />
              <el-option label="DeepSeek Chat" value="deepseek-chat" />
            </el-select>
          </el-form-item>
          <el-form-item label="æ¸©åº¦">
            <el-slider v-model="agentForm.temperature" :min="0" :max="2" :step="0.1" show-input />
          </el-form-item>
        </el-form>
        <el-button type="primary" @click="createAgent" :loading="creating">
          ğŸš€ ä¸€é”®åˆ›å»ºå¹¶æ‰§è¡Œ
        </el-button>
      </el-card>
    </div>

    <!-- ä½¿ç”¨ç»Ÿè®¡ -->
    <div class="analytics-section">
      <h2>ğŸ“Š ä½¿ç”¨ç»Ÿè®¡</h2>
      <el-row :gutter="20">
        <el-col :span="8">
          <el-card>
            <div class="stat">
              <div class="stat-value">{{ skill.usage_count }}</div>
              <div class="stat-label">æ€»ä½¿ç”¨æ¬¡æ•°</div>
            </div>
          </el-card>
        </el-col>
        <el-col :span="8">
          <el-card>
            <div class="stat">
              <div class="stat-value">{{ skill.weekly_usage }}</div>
              <div class="stat-label">æœ¬å‘¨ä½¿ç”¨</div>
            </div>
          </el-card>
        </el-col>
        <el-col :span="8">
          <el-card>
            <div class="stat">
              <div class="stat-value">{{ skill.top_user_department }}</div>
              <div class="stat-label">ä¸»è¦ç”¨æˆ·</div>
            </div>
          </el-card>
        </el-col>
      </el-row>
    </div>

    <!-- ç”¨æˆ·è¯„ä»· -->
    <div class="reviews-section">
      <h2>ğŸ’¬ ç”¨æˆ·è¯„ä»· ({{ skill.reviews.length }})</h2>
      <div class="review-list">
        <div v-for="review in skill.reviews" :key="review.id" class="review-item">
          <el-rate v-model="review.rating" disabled />
          <span class="reviewer">{{ review.reviewer_name }}</span>
          <p class="review-content">{{ review.content }}</p>
        </div>
      </div>
      <el-button v-if="!skill.has_rated" @click="showReviewDialog = true">
        â­ æˆ‘ä¹Ÿè¦è¯„ä»·
      </el-button>
    </div>

    <!-- åº•éƒ¨æ“ä½œ -->
    <div class="action-bar">
      <el-button @click="saveSkill">
        ğŸ’¾ ä¿å­˜åˆ°æˆ‘çš„ Skills
      </el-button>
      <el-button @click="$router.back()">
        ğŸ”™ è¿”å›
      </el-button>
    </div>
  </div>
</template>
```

---

## 2. Workflow Studio

### 2.1 å·¥ä½œæµç¼–è¾‘å™¨

```vue
<template>
  <div class="workflow-studio">
    <!-- é¡¶éƒ¨å·¥å…·æ  -->
    <div class="toolbar">
      <el-button-group>
        <el-button icon="FolderOpened" @click="showMyWorkflows">ğŸ“‹ æˆ‘çš„ Workflows</el-button>
        <el-button icon="Plus" @click="createNewWorkflow">â• æ–°å»º Workflow</el-button>
        <el-button icon="Document" @click="showTemplates">ğŸ“š æ¨¡æ¿åº“</el-button>
      </el-button-group>

      <el-button v-if="currentWorkflow" type="primary" @click="saveWorkflow">
        ğŸ’¾ ä¿å­˜
      </el-button>
      <el-button v-if="currentWorkflow" @click="executeWorkflow">
        â–¶ï¸ æ‰§è¡Œ
      </el-button>
    </div>

    <div class="studio-content">
      <!-- å·¦ä¾§ç»„ä»¶åº“ -->
      <div class="component-library">
        <h3>ğŸ§© æ‹–æ‹½ç»„ä»¶</h3>

        <el-collapse v-model="activeComponents">
          <el-collapse-item title="ğŸ“Š Skills" name="skills">
            <div class="component-list">
              <div
                v-for="skill in availableSkills"
                :key="skill.id"
                class="draggable-component"
                draggable="true"
                @dragstart="onDragStart($event, 'skill', skill)"
              >
                <el-checkbox v-model="skill.selected">{{ skill.name }}</el-checkbox>
              </div>
            </div>
          </el-collapse-item>

          <el-collapse-item title="ğŸ¤– Agents" name="agents">
            <div class="component-list">
              <div
                v-for="agent in availableAgents"
                :key="agent.id"
                class="draggable-component"
                draggable="true"
                @dragstart="onDragStart($event, 'agent', agent)"
              >
                <el-checkbox v-model="agent.selected">{{ agent.name }}</el-checkbox>
              </div>
            </div>
          </el-collapse-item>

          <el-collapse-item title="ğŸ”¶ æ¡ä»¶åˆ¤æ–­" name="conditions">
            <div class="component-list">
              <div
                class="draggable-component"
                draggable="true"
                @dragstart="onDragStart($event, 'condition')"
              >
                ğŸ”¶ If/Else æ¡ä»¶åˆ†æ”¯
              </div>
            </div>
          </el-collapse-item>

          <el-collapse-item title="âš™ï¸ è§¦å‘å™¨" name="triggers">
            <div class="component-list">
              <div class="trigger-option" @click="addTrigger('schedule')">
                â° å®šæ—¶è§¦å‘
              </div>
              <div class="trigger-option" @click="addTrigger('manual')">
                ğŸ”” æ‰‹åŠ¨è§¦å‘
              </div>
              <div class="trigger-option" @click="addTrigger('webhook')">
                ğŸŒ Webhook
              </div>
            </div>
          </el-collapse-item>
        </el-collapse>
      </div>

      <!-- ä¸­é—´ç”»å¸ƒåŒºåŸŸ -->
      <div class="canvas-area">
        <div
          v-if="!currentWorkflow"
          class="empty-state"
        >
          <h2>ğŸ”§ å¼€å§‹åˆ›å»ºæ‚¨çš„ Workflow</h2>
          <p>ä»æ¨¡æ¿åº“é€‰æ‹©æˆ–ä»é›¶å¼€å§‹</p>
          <el-button type="primary" @click="showTemplates">ğŸ“š æµè§ˆæ¨¡æ¿åº“</el-button>
        </div>

        <div
          v-else
          class="workflow-canvas"
          @drop="onDrop"
          @dragover.prevent
        >
          <!-- Workflow èŠ‚ç‚¹å¯è§†åŒ– -->
          <div class="workflow-nodes">
            <div
              v-for="(step, index) in workflowSteps"
              :key="step.id"
              class="workflow-node"
            >
              <div class="node-header">
                <span class="step-number">{{ index + 1 }}</span>
                <span class="step-name">{{ step.name }}</span>
                <el-button
                  icon="Delete"
                  circle
                  size="small"
                  type="danger"
                  @click="removeStep(step.id)"
                />
              </div>
              <div class="node-body">
                <el-tag :type="getStepTypeColor(step.type)">
                  {{ getStepTypeLabel(step.type) }}
                </el-tag>
                <span>{{ step.config.name }}</span>
              </div>
              <div class="node-arrow">â†“</div>
            </div>
          </div>

          <!-- æ·»åŠ èŠ‚ç‚¹æŒ‰é’® -->
          <div class="add-node-section">
            <el-button
              icon="Plus"
              @click="showAddStepDialog"
            >
              â• æ·»åŠ æ­¥éª¤
            </el-button>
          </div>
        </div>
      </div>

      <!-- å³ä¾§é…ç½®é¢æ¿ -->
      <div class="config-panel" v-if="selectedStep">
        <h3>âš™ï¸ é…ç½®: {{ selectedStep.name }}</h3>
        <el-form label-width="100px">
          <!-- æ ¹æ®æ­¥éª¤ç±»å‹æ˜¾ç¤ºä¸åŒçš„é…ç½®é¡¹ -->
          <div v-if="selectedStep.type === 'skill'">
            <el-form-item label="Skill">
              <el-select v-model="selectedStep.config.skill_id">
                <el-option
                  v-for="skill in availableSkills"
                  :key="skill.id"
                  :label="skill.name"
                  :value="skill.id"
                />
              </el-select>
            </el-form-item>
            <el-form-item label="å‚æ•°é…ç½®">
              <el-input
                v-model="selectedStep.config.params"
                type="textarea"
                :rows="5"
                placeholder="JSON æ ¼å¼çš„å‚æ•°é…ç½®"
              />
            </el-form-item>
          </div>

          <div v-else-if="selectedStep.type === 'agent'">
            <el-form-item label="Agent">
              <el-select v-model="selectedStep.config.agent_id">
                <el-option
                  v-for="agent in availableAgents"
                  :key="agent.id"
                  :label="agent.name"
                  :value="agent.id"
                />
              </el-select>
            </el-form-item>
          </div>

          <div v-else-if="selectedStep.type === 'condition'">
            <el-form-item label="æ¡ä»¶">
              <el-input
                v-model="selectedStep.config.condition"
                placeholder="ä¾‹å¦‚: {{ price_change }} > 0.05"
              />
            </el-form-item>
            <el-form-item label="True åˆ†æ”¯">
              <el-select v-model="selectedStep.config.true_branch">
                <el-option label="å‘é€å‘Šè­¦" value="send_alert" />
                <el-option label="ç»“æŸ" value="end" />
              </el-select>
            </el-form-item>
          </div>

          <el-form-item label="è¾“å‡ºå˜é‡">
            <el-input
              v-model="selectedStep.output_to"
              placeholder="å˜é‡å"
            />
          </el-form-item>
        </el-form>
      </div>
    </div>

    <!-- æ·»åŠ æ­¥éª¤å¯¹è¯æ¡† -->
    <el-dialog v-model="showAddStep" title="æ·»åŠ å·¥ä½œæµæ­¥éª¤" width="600px">
      <el-form :model="newStep" label-width="100px">
        <el-form-item label="æ­¥éª¤åç§°" required>
          <el-input v-model="newStep.name" placeholder="ä¾‹å¦‚ï¼šæŸ¥è¯¢ä»·æ ¼" />
        </el-form-item>
        <el-form-item label="æ­¥éª¤ç±»å‹" required>
          <el-select v-model="newStep.type">
            <el-option label="ğŸ“Š Skill" value="skill" />
            <el-option label="ğŸ¤– Agent" value="agent" />
            <el-option label="ğŸ”¶ æ¡ä»¶åˆ¤æ–­" value="condition" />
          </el-select>
        </el-form-item>

        <!-- æ ¹æ®ç±»å‹æ˜¾ç¤ºä¸åŒçš„é…ç½® -->
        <div v-if="newStep.type === 'skill'">
          <el-form-item label="é€‰æ‹© Skill" required>
            <el-select v-model="newStep.skill_id" placeholder="é€‰æ‹© Skill">
              <el-option
                v-for="skill in availableSkills"
                :key="skill.id"
                :label="skill.name"
                :value="skill.id"
              />
            </el-select>
          </el-form-item>
        </div>

        <div v-else-if="newStep.type === 'agent'">
          <el-form-item label="é€‰æ‹© Agent" required>
            <el-select v-model="newStep.agent_id" placeholder="é€‰æ‹© Agent">
              <el-option
                v-for="agent in availableAgents"
                :key="agent.id"
                :label="agent.name"
                :value="agent.id"
              />
            </el-select>
          </el-form-item>
        </div>

        <el-form-item label="è¾“å‡ºå˜é‡">
          <el-input v-model="newStep.output_to" placeholder="ä¿å­˜ç»“æœåˆ°å˜é‡" />
        </el-form-item>
      </el-form>
      <template #footer>
        <el-button @click="showAddStep = false">å–æ¶ˆ</el-button>
        <el-button type="primary" @click="addStep">æ·»åŠ </el-button>
      </template>
    </el-dialog>

    <!-- æ‰§è¡Œç»“æœå¯¹è¯æ¡† -->
    <el-dialog v-model="showExecutionResult" title="å·¥ä½œæµæ‰§è¡Œç»“æœ" width="800px">
      <div class="execution-result">
        <el-descriptions :column="2" border>
          <el-descriptions-item label="æ‰§è¡ŒçŠ¶æ€">
            <el-tag :type="executionResult.status === 'success' ? 'success' : 'danger'">
              {{ executionResult.status }}
            </el-tag>
          </el-descriptions-item>
          <el-descriptions-item label="å¼€å§‹æ—¶é—´">
            {{ executionResult.started_at }}
          </el-descriptions-item>
          <el-descriptions-item label="ç»“æŸæ—¶é—´">
            {{ executionResult.completed_at }}
          </el-descriptions-item>
          <el-descriptions-item label="æ‰§è¡Œè€—æ—¶">
            {{ executionResult.duration }}ç§’
          </el-descriptions-item>
        </el-descriptions>

        <el-divider />

        <h4>æ­¥éª¤æ‰§è¡Œè¯¦æƒ…</h4>
        <el-timeline>
          <el-timeline-item
            v-for="step in executionResult.steps"
            :key="step.id"
            :timestamp="step.completed_at"
            :type="step.status === 'success' ? 'success' : 'danger'"
          >
            <h5>{{ step.name }}</h5>
            <p v-if="step.input"><strong>è¾“å…¥:</strong> {{ step.input }}</p>
            <p v-if="step.output"><strong>è¾“å‡º:</strong> {{ step.output }}</p>
            <p v-if="step.error" class="error"><strong>é”™è¯¯:</strong> {{ step.error }}</p>
          </el-timeline-item>
        </el-timeline>
      </div>
    </el-dialog>
  </div>
</template>
```

---

## 3. å›¢é˜Ÿç©ºé—´

### 3.1 å›¢é˜Ÿä¸»é¡µ

```vue
<template>
  <div class="team-space">
    <!-- éƒ¨é—¨é€‰æ‹© -->
    <div class="department-selector">
      <el-select v-model="selectedDepartment" placeholder="é€‰æ‹©éƒ¨é—¨">
        <el-option label="ç ”å‘éƒ¨" value="ç ”å‘éƒ¨" />
        <el-option label="å¸‚åœºéƒ¨" value="å¸‚åœºéƒ¨" />
        <el-option label="å®¢æœéƒ¨" value="å®¢æœéƒ¨" />
        <el-option label="IT éƒ¨" value="IT éƒ¨" />
      </el-select>
    </div>

    <!-- å›¢é˜Ÿæˆå‘˜ -->
    <div class="team-members">
      <h2>ğŸ‘¥ å›¢é˜Ÿæˆå‘˜ ({{ teamMembers.length }})</h2>
      <el-button type="primary" size="small" @click="inviteMember">
        â• é‚€è¯·æˆå‘˜
      </el-button>

      <el-row :gutter="20">
        <el-col :span="4" v-for="member in teamMembers" :key="member.id">
          <el-card class="member-card">
            <div class="member-avatar">
              {{ member.username.charAt(0).toUpperCase() }}
            </div>
            <div class="member-name">{{ member.username }}</div>
            <div class="member-role">{{ getRoleLabel(member.role) }}</div>
          </el-card>
        </el-col>
      </el-row>
    </div>

    <!-- å›¢é˜Ÿèµ„æº -->
    <el-tabs v-model="activeResourceTab">
      <!-- å›¢é˜Ÿ Skills -->
      <el-tab-pane label="ğŸ“¦ å›¢é˜Ÿ Skills" name="skills">
        <div class="resource-toolbar">
          <el-button type="primary" @click="uploadSkill">
            â• ä¸Šä¼  Skill
          </el-button>
          <el-input
            v-model="skillSearch"
            placeholder="æœç´¢ Skills..."
            prefix-icon="Search"
            style="width: 300px"
          />
        </div>

        <el-table :data="teamSkills" stripe>
          <el-table-column prop="name" label="Skill åç§°" />
          <el-table-column prop="created_by" label="åˆ›å»ºè€…" width="120" />
          <el-table-column prop="usage_count" label="ä½¿ç”¨æ¬¡æ•°" width="100" />
          <el-table-column label="æ“ä½œ" width="200">
            <template #default="{ row }">
              <el-button link type="primary" @click="useSkill(row)">ä½¿ç”¨</el-button>
              <el-button link type="primary" @click="editSkill(row)">ç¼–è¾‘</el-button>
              <el-button link type="danger" @click="deleteSkill(row)">åˆ é™¤</el-button>
            </template>
          </el-table-column>
        </el-table>
      </el-tab-pane>

      <!-- å›¢é˜Ÿ Agents -->
      <el-tab-pane label="ğŸ¤– å›¢é˜Ÿ Agents" name="agents">
        <div class="resource-toolbar">
          <el-button type="primary" @click="createAgent">
            â• åˆ›å»º Agent
          </el-button>
        </div>

        <el-table :data="teamAgents" stripe>
          <el-table-column prop="name" label="Agent åç§°" />
          <el-table-column prop="model_name" label="æ¨¡å‹" width="150" />
          <el-table-column prop="usage_count" label="ä½¿ç”¨æ¬¡æ•°" width="100" />
          <el-table-column label="æ“ä½œ" width="200">
            <template #default="{ row }">
              <el-button link type="primary" @click="executeAgent(row)">æ‰§è¡Œ</el-button>
              <el-button link type="primary" @click="viewAgent(row)">æŸ¥çœ‹</el-button>
            </template>
          </el-table-column>
        </el-table>
      </el-tab-pane>

      <!-- å›¢é˜Ÿ Workflows -->
      <el-tab-pane label="ğŸ”§ å›¢é˜Ÿ Workflows" name="workflows">
        <div class="resource-toolbar">
          <el-button type="primary" @click="createWorkflow">
            â• åˆ›å»º Workflow
          </el-button>
        </div>

        <el-table :data="teamWorkflows" stripe>
          <el-table-column prop="name" label="Workflow åç§°" />
          <el-table-column prop="trigger_type" label="è§¦å‘ç±»å‹" width="120" />
          <el-table-column prop="last_run" label="æœ€åæ‰§è¡Œ" width="180" />
          <el-table-column label="æ“ä½œ" width="200">
            <template #default="{ row }">
              <el-button link type="primary" @click="executeWorkflow(row)">æ‰§è¡Œ</el-button>
              <el-button link type="primary" @click="editWorkflow(row)">ç¼–è¾‘</el-button>
              <el-button link type="primary" @click="viewHistory(row)">å†å²</el-button>
            </template>
          </el-table-column>
        </el-table>
      </el-tab-pane>
    </el-tabs>

    <!-- å›¢é˜Ÿç»Ÿè®¡ -->
    <div class="team-stats">
      <h2>ğŸ“Š å›¢é˜Ÿç»Ÿè®¡</h2>
      <el-row :gutter="20">
        <el-col :span="6">
          <el-card class="stat-card">
            <div class="stat-value">{{ stats.active_members }}/{{ stats.total_members }}</div>
            <div class="stat-label">æœ¬æœˆæ´»è·ƒæˆå‘˜</div>
          </el-card>
        </el-col>
        <el-col :span="6">
          <el-card class="stat-card">
            <div class="stat-value">{{ stats.new_skills_this_month }}</div>
            <div class="stat-label">æœ¬æœˆæ–°å¢ Skills</div>
          </el-card>
        </el-col>
        <el-col :span="6">
          <el-card class="stat-card">
            <div class="stat-value">{{ stats.execution_count_this_month }}</div>
            <div class="stat-label">æœ¬æœˆæ‰§è¡Œæ¬¡æ•°</div>
          </el-card>
        </el-col>
        <el-col :span="6">
          <el-card class="stat-card">
            <div class="stat-value">{{ stats.tokens_saved }}</div>
            <div class="stat-label">èŠ‚çœ Tokens</div>
          </el-card>
        </el-col>
      </el-row>
    </div>
  </div>
</template>
```

---

## 4. æ™ºèƒ½æ¨èç³»ç»Ÿ

```vue
<template>
  <div class="recommendations">
    <h2>ğŸ’¡ ä¸ºæ‚¨æ¨è</h2>
    <p class="subtitle">åŸºäºæ‚¨çš„ä½¿ç”¨ä¹ æƒ¯å’Œå›¢é˜ŸåŠ¨æ€æ™ºèƒ½æ¨è</p>

    <!-- æ¨èçš„ Skills -->
    <div class="recommendation-section">
      <h3>ğŸ¯ æ¨è Skills</h3>
      <el-row :gutter="20">
        <el-col :span="12" v-for="item in recommendedSkills" :key="item.id">
          <el-card class="recommendation-card">
            <div class="card-header">
              <span class="card-title">{{ item.skill.name }}</span>
              <el-tag size="small">{{ item.reason }}</el-tag>
            </div>
            <p class="card-reason">{{ item.description }}</p>
            <el-button type="primary" @click="useRecommendedSkill(item.skill)">
              ğŸš€ ä¸€é”®åˆ›å»º Agent
            </el-button>
          </el-card>
        </el-col>
      </el-row>
    </div>

    <!-- æ¨èçš„ Workflows -->
    <div class="recommendation-section">
      <h3>ğŸ¯ æ¨è Workflow</h3>
      <el-row :gutter="20">
        <el-col :span="12" v-for="item in recommendedWorkflows" :key="item.id">
          <el-card class="recommendation-card workflow-card">
            <div class="card-header">
              <span class="card-title">{{ item.workflow.name }}</span>
              <el-tag type="success" size="small">ğŸ”¥ çƒ­é—¨</el-tag>
            </div>
            <p class="card-description">{{ item.description }}</p>
            <div class="workflow-info">
              <span>ğŸ“¦ ç»„åˆ {{ item.skill_count }} ä¸ª Skills</span>
              <span>ğŸ‘ï¸ {{ item.usage_count }} æ¬¡å¤ç”¨</span>
            </div>
            <el-button @click="useRecommendedWorkflow(item.workflow)">
              ğŸš€ ä¸€é”®å¤ç”¨
            </el-button>
          </el-card>
        </el-col>
      </el-row>
    </div>

    <el-button @click="refreshRecommendations">
      ğŸ”„ åˆ·æ–°æ¨è
    </el-button>
    <el-button @click="viewMore">
      ğŸ“Š æŸ¥çœ‹æ›´å¤š
    </el-button>
  </div>
</template>
```

---

## 5. æ¸¸æˆåŒ–ç³»ç»Ÿ

### 5.1 ç”¨æˆ·ç­‰çº§ä¸æˆå°±

```vue
<template>
  <div class="gamification">
    <!-- ç”¨æˆ·ç­‰çº§ -->
    <div class="user-level">
      <h2>ğŸ† æˆ‘çš„ç­‰çº§</h2>
      <div class="level-info">
        <div class="level-badge">
          <span class="level-stars">â­â­â­â­â˜†</span>
          <span class="level-name">Expert User</span>
        </div>
        <div class="level-bar">
          <el-progress
            :percentage="75"
            :format="() => '3,450 / 4,000 XP'"
            :stroke-width="20"
          />
          <p class="level-progress">è¿˜éœ€ 550 XP å‡çº§åˆ° Master User</p>
        </div>
      </div>

      <!-- ç»éªŒè·å–é€”å¾„ -->
      <div class="xp-sources">
        <h4>è·å–ç»éªŒå€¼ï¼š</h4>
        <ul>
          <li>âœ… æ‰§è¡Œ Agent (+10 XP)</li>
          <li>âœ… åˆ›å»º Workflow (+50 XP)</li>
          <li>âœ… åˆ†äº« Skill (+150 XP)</li>
          <li>â­ è·å¾—å¥½è¯„ (+20 XP)</li>
        </ul>
      </div>
    </div>

    <!-- å¾½ç«  -->
    <div class="badges">
      <h2>ğŸ–ï¸ æˆ‘çš„å¾½ç« </h2>
      <el-row :gutter="15">
        <el-col :span="6" v-for="badge in badges" :key="badge.id">
          <el-card class="badge-card" :class="{ earned: badge.earned }">
            <div class="badge-icon">{{ badge.icon }}</div>
            <div class="badge-name">{{ badge.name }}</div>
            <div class="badge-description">{{ badge.description }}</div>
          </el-card>
        </el-col>
      </el-row>
    </div>

    <!-- æ’è¡Œæ¦œ -->
    <div class="leaderboard">
      <h2>ğŸ† æœ¬å‘¨æ’è¡Œæ¦œ</h2>
      <el-tabs v-model="leaderboardType">
        <el-tab-pane label="ç»éªŒå€¼æ’è¡Œ" name="xp">
          <el-table :data="xpLeaderboard" stripe>
            <el-table-column label="æ’å" width="80">
              <template #default="{ $index }">
                <span class="rank-badge" :class="{ top3: $index < 3 }">
                  {{ $index + 1 }}
                </span>
              </template>
            </el-table-column>
            <el-table-column prop="username" label="ç”¨æˆ·" />
            <el-table-column prop="xp" label="ç»éªŒå€¼" width="120" />
          </el-table>
        </el-tab-pane>

        <el-tab-pane label="è´¡çŒ®åº¦æ’è¡Œ" name="contribution">
          <el-table :data="contributionLeaderboard" stripe>
            <el-table-column label="æ’å" width="80" />
            <el-table-column prop="username" label="ç”¨æˆ·" />
            <el-table-column prop="skill_count" label="Skills" width="100" />
            <el-table-column prop="usage_count" label="ä½¿ç”¨æ¬¡æ•°" width="120" />
          </el-table>
        </el-tab-pane>
      </el-tabs>
    </div>
  </div>
</template>
```

---

## 6. è·¯ç”±ç»“æ„æ›´æ–°

```typescript
// router/index.ts
const routes: RouteRecordRaw[] = [
  // å…¬å…±è·¯ç”±
  {
    path: '/login',
    name: 'Login',
    component: () => import('@/views/LoginView.vue'),
    meta: { requiresAuth: false }
  },

  // ä¸»å¸ƒå±€è·¯ç”±
  {
    path: '/',
    component: () => import('@/layouts/MainLayout.vue'),
    meta: { requiresAuth: true },
    children: [
      {
        path: '',
        name: 'Dashboard',
        component: () => import('@/views/DashboardView.vue'),
      },

      // Skills Marketplace
      {
        path: 'marketplace',
        name: 'SkillsMarketplace',
        component: () => import('@/views/MarketplaceView.vue'),
      },
      {
        path: 'marketplace/skill/:id',
        name: 'SkillDetail',
        component: () => import('@/views/SkillDetailView.vue'),
      },
      {
        path: 'marketplace/my-skills',
        name: 'MySkills',
        component: () => import('@/views/MySkillsView.vue'),
      },

      // Skills ç®¡ç†
      {
        path: 'skills',
        name: 'Skills',
        component: () => import('@/views/SkillsView.vue'),
      },

      // Agents ç®¡ç†
      {
        path: 'agents',
        name: 'Agents',
        component: () => import('@/views/AgentsView.vue'),
      },
      {
        path: 'agents/:id',
        name: 'AgentDetail',
        component: () => import('@/views/AgentDetailView.vue'),
      },

      // Workflow Studio
      {
        path: 'workflows',
        name: 'Workflows',
        component: () => import('@/views/WorkflowsView.vue'),
      },
      {
        path: 'workflows/create',
        name: 'CreateWorkflow',
        component: () => import('@/views/CreateWorkflowView.vue'),
      },
      {
        path: 'workflows/:id',
        name: 'WorkflowDetail',
        component: () => import('@/views/WorkflowDetailView.vue),
      },
      {
        path: 'workflows/:id/edit',
        name: 'EditWorkflow',
        component: () => import('@/views/EditWorkflowView.vue'),
      },

      // å›¢é˜Ÿç©ºé—´
      {
        path: 'team',
        name: 'TeamSpace',
        component: () => import('@/views/TeamView.vue'),
      },

      // ç›‘æ§æ•°æ®
      {
        path: 'monitoring',
        name: 'Monitoring',
        component: () => import('@/views/MonitoringView.vue'),
      },

      // æˆå°±ç³»ç»Ÿ
      {
        path: 'achievements',
        name: 'Achievements',
        component: () => import('@/views/AchievementsView.vue'),
      },

      // ç”¨æˆ·è®¾ç½®
      {
        path: 'settings',
        name: 'Settings',
        component: () => import('@/views/SettingsView.vue'),
      },
    ],
  },
]
```

---

## 7. API æ¥å£è®¾è®¡

### Skills Marketplace API

```python
@router.get("/marketplace/skills", response_model=List[SkillMarketResponse])
async def get_marketplace_skills(
    category: Optional[str] = None,
    sharing_scope: Optional[str] = None,
    sort_by: str = "usage_count",
    skip: int = 0,
    limit: int = 20,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_active_user),
):
    """
    è·å– Marketplace Skills åˆ—è¡¨

    - æ”¯æŒåˆ†ç±»ç­›é€‰
    - æ”¯æŒæƒé™è¿‡æ»¤ï¼ˆä¸ªäºº/å›¢é˜Ÿ/å…¨å±€ï¼‰
    - æ”¯æŒæ’åºï¼ˆçƒ­åº¦ã€æœ€æ–°ã€è¯„åˆ†ï¼‰
    """
    query = db.query(Skill).filter(Skill.is_active == True)

    # æƒé™è¿‡æ»¤
    if sharing_scope == "private":
        query = query.filter(Skill.created_by == current_user.id)
    elif sharing_scope == "team":
        query = query.filter(
            (Skill.created_by == current_user.id) |
            (Skill.sharing_scope == "team") &
            (Skill.created_by_department == current_user.department)
        )
    # public æ— é™åˆ¶

    # åˆ†ç±»ç­›é€‰
    if category:
        query = query.filter(Skill.category == category)

    # æ’åº
    if sort_by == "usage_count":
        query = query.order_by(Skill.usage_count.desc())
    elif sort_by == "rating":
        query = query.order_by(Skill.rating.desc())
    elif sort_by == "newest":
        query = query.order_by(Skill.created_at.desc())

    skills = query.offset(skip).limit(limit).all()
    return [SkillMarketResponse.model_validate(s) for s in skills]


@router.post("/marketplace/skills/{skill_id}/try", response_model=TrySkillResponse)
async def try_skill(
    skill_id: int,
    request: TrySkillRequest,
    db: Session = Depends(get_db),
):
    """
    è¯•ç”¨ Skillï¼ˆæ— éœ€ç™»å½•ï¼‰

    - ä½¿ç”¨å…¬å…± Agent æ‰§è¡Œ Skill
    - è¿”å›æ‰§è¡Œç»“æœ
    - æ¶ˆè€— tokens
    """
    skill = db.query(Skill).get(skill_id)

    # æ‰§è¡Œ Skill
    result = await execute_skill(skill, request.message)

    # å¢åŠ ä½¿ç”¨è®¡æ•°
    skill.usage_count += 1
    db.commit()

    return result


@router.post("/marketplace/skills/{skill_id}/create-agent", response_model=AgentResponse)
async def create_agent_from_skill(
    skill_id: int,
    config: CreateAgentFromSkillRequest,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_active_user),
):
    """
    ä» Skill ä¸€é”®åˆ›å»º Agent

    - è‡ªåŠ¨é…ç½® Skill
    - ä½¿ç”¨æ¨èçš„å‚æ•°
    """
    skill = db.query(Skill).get(skill_id)

    agent = Agent(
        name=config.name or f"{skill.name} Agent",
        description=config.description or f"åŸºäº {skill.name} çš„ Agent",
        model_name=config.model_name or "qwen-max",
        temperature=config.temperature or 0.7,
        system_prompt=config.system_prompt,
        created_by=current_user.id,
    )
    db.add(agent)
    db.commit()
    db.refresh(agent)

    # å…³è” Skill
    agent_skill = AgentSkill(
        agent_id=agent.id,
        skill_id=skill.id,
        enabled=True,
    )
    db.add(agent_skill)
    db.commit()

    return AgentResponse.model_validate(agent)


@router.post("/marketplace/skills/{skill_id}/rate", response_model=RatingResponse)
async def rate_skill(
    skill_id: int,
    rating: int,
    comment: str,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_active_user),
):
    """
    è¯„ä»· Skill

    - 1-5 æ˜Ÿè¯„åˆ†
    - æ”¯æŒè¯„è®º
    - æ›´æ–° Skill çš„å¹³å‡è¯„åˆ†
    """
    # æ£€æŸ¥æ˜¯å¦å·²è¯„ä»·
    existing = db.query(SkillRating).filter(
        skill_id == skill_id,
        user_id == current_user.id
    ).first()

    if existing:
        # æ›´æ–°è¯„ä»·
        existing.rating = rating
        existing.comment = comment
    else:
        # åˆ›å»ºæ–°è¯„ä»·
        new_rating = SkillRating(
            skill_id=skill_id,
            user_id=current_user.id,
            rating=rating,
            comment=comment,
        )
        db.add(new_rating)

    db.commit()

    # æ›´æ–° Skill çš„å¹³å‡è¯„åˆ†
    skill = db.query(Skill).get(skill_id)
    ratings = db.query(SkillRating).filter(SkillRating.skill_id == skill_id).all()
    skill.rating = sum(r.rating for r in ratings) / len(ratings)
    skill.rating_count = len(ratings)

    db.commit()

    return {"message": "è¯„ä»·æˆåŠŸ", "new_rating": skill.rating}


@router.post("/marketplace/skills/{skill_id}/save")
async def save_skill(
    skill_id: int,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_active_user),
):
    """
    ä¿å­˜ Skill åˆ°æˆ‘çš„æ”¶è—
    """
    existing = db.query(SavedSkill).filter(
        skill_id == skill_id,
        user_id == current_user.id
    ).first()

    if not existing:
        saved = SavedSkill(
            skill_id=skill_id,
            user_id=current_user.id,
        )
        db.add(saved)
        db.commit()

    return {"message": "å·²ä¿å­˜åˆ°æˆ‘çš„ Skills"}
```

---

## 8. æ•°æ®åº“æ¨¡å‹

```python
# Skill å¢å¼º
class Skill(Base):
    existing_fields...

    # æƒé™å­—æ®µ
    sharing_scope: Mapped[str] = mapped_column(
        String(20),
        default="private",  # private, team, public
        nullable=False
    )
    department: Mapped[Optional[str]] = mapped_column(String(50))
    created_by_department: Mapped[Optional[str]] = mapped_column(String(50))
    is_official: Mapped[bool] = mapped_column(Boolean, default=False)

    # ç»Ÿè®¡å­—æ®µ
    usage_count: Mapped[int] = mapped_column(Integer, default=0)
    weekly_usage: Mapped[int] = mapped_column(Integer, default=0)
    rating: Mapped[Optional[float]] = mapped_column(DECIMAL(3, 2))
    rating_count: Mapped[int] = mapped_column(Integer, default=0)

    # æ–‡æ¡£
    description: Mapped[Optional[str]] = mapped_column(Text)
    documentation: Mapped[Optional[str]] = mapped_column(Text)


# Skill è¯„ä»·
class SkillRating(Base):
    __tablename__ = "skill_ratings"

    id: Mapped[int] = mapped_column(Integer, primary_key=True)
    skill_id: Mapped[int] = mapped_column(Integer, ForeignKey("skills.id"))
    user_id: Mapped[int] = mapped_column(Integer, ForeignKey("users.id"))
    rating: Mapped[int] = mapped_column(Integer)  # 1-5
    comment: Mapped[Optional[str]] = mapped_column(Text)
    created_at: Mapped[DateTime] = mapped_column(DateTime, default=datetime.datetime.utcnow)

    # å…³ç³»
    skill = relationship("Skill", backref="ratings")
    user = relationship("User")


# ä¿å­˜çš„ Skills
class SavedSkill(Base):
    __tablename__ = "saved_skills"

    id: Mapped[int] = mapped_column(Integer, primary_key=True)
    skill_id: Mapped[int] = mapped_column(Integer, ForeignKey("skills.id"))
    user_id: Mapped[int] = mapped_column(Integer, ForeignKey("users.id"))
    created_at: Mapped[DateTime] = mapped_column(DateTime, default=datetime.datetime.utcnow)


# Workflow
class Workflow(Base):
    __tablename__ = "workflows"

    id: Mapped[int] = mapped_column(Integer, primary_key=True)
    name: Mapped[str] = mapped_column(String(100), nullable=False)
    description: Mapped[Optional[str]] = mapped_column(Text)
    sharing_scope: Mapped[str] = mapped_column(String(20), default="private")

    # å·¥ä½œæµé…ç½®
    config: Mapped[dict] = mapped_column(JSON)  # Workflow å®šä¹‰

    is_template: Mapped[bool] = mapped_column(Boolean, default=False)
    usage_count: Mapped[int] = mapped_column(Integer, default=0)

    created_by: Mapped[int] = mapped_column(Integer, ForeignKey("users.id"))
    created_at: Mapped[DateTime] = mapped_column(DateTime, default=datetime.datetime.utcnow)
    updated_at: Mapped[DateTime] = mapped_column(
        DateTime, default=datetime.datetime.utcnow, onupdate=datetime.datetime.utcnow
    )

    # å…³ç³»
    creator = relationship("User")
    executions = relationship("WorkflowExecution", back_populates="workflow")


# Workflow æ‰§è¡Œè®°å½•
class WorkflowExecution(Base):
    __tablename__ = "workflow_executions"

    id: Mapped[int] = mapped_column(Integer, primary_key=True)
    workflow_id: Mapped[int] = mapped_column(Integer, ForeignKey("workflows.id"))

    status: Mapped[str] = mapped_column(String(20), default="pending")
    input_data: Mapped[dict] = mapped_column(JSON)
    output_data: Mapped[Optional[dict]] = mapped_column(JSON)
    error_message: Mapped[Optional[str]] = mapped_column(Text)

    started_at: Mapped[DateTime] = mapped_column(DateTime, default=datetime.datetime.utcnow)
    completed_at: Mapped[Optional[DateTime]] = mapped_column(DateTime)

    # å…³ç³»
    workflow = relationship("Workflow", back_populates="executions")
    steps = relationship("WorkflowStepExecution", back_populates="execution")


# Workflow æ­¥éª¤æ‰§è¡Œè®°å½•
class WorkflowStepExecution(Base):
    __tablename__ = "workflow_step_executions"

    id: Mapped[int] = mapped_column(Integer, primary_key=True)
    execution_id: Mapped[int] = mapped_column(Integer, ForeignKey("workflow_executions.id"))

    step_name: Mapped[str] = mapped_column(String(100))
    step_type: Mapped[str] = mapped_column(String(20))  # skill, agent, condition
    skill_id: Mapped[Optional[int]] = mapped_column(Integer, ForeignKey("skills.id"))
    agent_id: Mapped[Optional[int]] = mapped_column(Integer, ForeignKey("agents.id"))

    status: Mapped[str] = mapped_column(String(20))
    input_data: Mapped[Optional[dict]] = mapped_column(JSON)
    output_data: Mapped[Optional[dict]] = mapped_column(JSON)
    error_message: Mapped[Optional[str]] = mapped_column(Text)

    started_at: Mapped[DateTime] = mapped_column(DateTime)
    completed_at: Mapped[Optional[DateTime]] = mapped_column(DateTime)


# ç”¨æˆ·å¢å¼º
class User(Base):
    existing_fields...

    # æ–°å¢å­—æ®µ
    department: Mapped[Optional[str]] = mapped_column(String(50))
    role: Mapped[str] = mapped_column(String(20), default="user")  # user, admin, super_admin

    # ç»Ÿè®¡
    xp: Mapped[int] = mapped_column(Integer, default=0)
    level: Mapped[str] = mapped_column(String(20), default="beginner")

    # å…³ç³»
    saved_skills = relationship("SavedSkill", back_populates="user")
    ratings = relationship("SkillRating", back_populates="user")


# æˆå°±ç³»ç»Ÿ
class Achievement(Base):
    __tablename__ = "achievements"

    id: Mapped[int] = mapped_column(Integer, primary_key=True)
    name: Mapped[str] = mapped_column(String(100), nullable=False)
    icon: Mapped[str] = mapped_column(String(50))  # emoji
    description: Mapped[str] = mapped_column(Text)
    requirement: Mapped[dict] = mapped_column(JSON)  # è·å¾—æ¡ä»¶

    created_at: Mapped[DateTime] = mapped_column(DateTime, default=datetime.datetime.utcnow)


class UserAchievement(Base):
    __tablename__ = "user_achievements"

    id: Mapped[int] = mapped_column(Integer, primary_key=True)
    user_id: Mapped[int] = mapped_column(Integer, ForeignKey("users.id"))
    achievement_id: Mapped[int] = mapped_column(Integer, ForeignKey("achievements.id"))
    earned_at: Mapped[DateTime] = mapped_column(DateTime, default=datetime.datetime.utcnow)
```

---

## 9. ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šç”¨æˆ·æµè§ˆ Marketplace

```typescript
// ç”¨æˆ·æµç¨‹
1. ç™»å½•å¹³å° â†’ é¦–é¡µçœ‹åˆ°æ¨è Skills
2. ç‚¹å‡»çƒ­é—¨ Skill â†’ è¿›å…¥è¯¦æƒ…é¡µ
3. "ç«‹å³è¯•ç”¨" â†’ è¾“å…¥æµ‹è¯•å†…å®¹ â†’ çœ‹åˆ°ç»“æœ
4. æ»¡æ„ â†’ "åˆ›å»º Agent" â†’ è‡ªåŠ¨é…ç½®
5. "ä¿å­˜åˆ°æˆ‘çš„ Skills" â†’ æ–¹ä¾¿ä¸‹æ¬¡ä½¿ç”¨
```

### ç¤ºä¾‹ 2ï¼šåˆ›å»º Workflow

```typescript
// ç”¨æˆ·æµç¨‹
1. è¿›å…¥ Workflow Studio
2. é€‰æ‹©"ä»·æ ¼ç›‘æ§æ¨¡æ¿" â†’ ä¸€é”®å¤ç”¨
3. æ‹–æ‹½è°ƒæ•´ï¼šæ·»åŠ é¢å¤–çš„é‚®ä»¶é€šçŸ¥æ­¥éª¤
4. é…ç½®å‚æ•°ï¼šè®¾ç½®é˜ˆå€¼ä¸º 5%
5. "ä¿å­˜" â†’ è®¾ç½®å®šæ—¶è§¦å‘ï¼ˆæ¯å¤©æ—©ä¸Š 8 ç‚¹ï¼‰
6. "æ‰§è¡Œ" â†’ æŸ¥çœ‹ç»“æœ â†’ ç¡®è®¤æ­£å¸¸è¿è¡Œ
```

### ç¤ºä¾‹ 3ï¼šå›¢é˜Ÿåä½œ

```typescript
// ç”¨æˆ·æµç¨‹
1. è¿›å…¥"å›¢é˜Ÿç©ºé—´"
2. ä¸Šä¼ è‡ªå·±å¼€å‘çš„ Skill
3. è®¾ç½®å…±äº«èŒƒå›´ä¸º"å›¢é˜Ÿ"
4. å›¢é˜Ÿæˆå‘˜æµè§ˆ â†’ "ä¸€é”®åˆ›å»º Agent"
5. å¤§å®¶éƒ½ä½¿ç”¨åŒä¸€ä¸ª Skill â†’ æé«˜æ•ˆç‡
6. æŸ¥çœ‹å›¢é˜Ÿç»Ÿè®¡ â†’ äº†è§£ä½¿ç”¨æƒ…å†µ
```

---

## 10. æ ¸å¿ƒä»·å€¼

| åŠŸèƒ½ | ç”¨æˆ·ä»·å€¼ | å•†ä¸šä»·å€¼ |
|------|---------|---------|
| **Skills Marketplace** | å¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„æŠ€èƒ½ | æé«˜ Skills åˆ©ç”¨ç‡ |
| **One-Click Agent** | 3 ç§’åˆ›å»º Agent | é™ä½ä½¿ç”¨é—¨æ§› |
| **Workflow Studio** | å¯è§†åŒ–ç¼–æ’å¤æ‚æµç¨‹ | æå‡å¹³å°ç²˜æ€§ |
| **æ¨¡æ¿åº“** | ä¸€é”®å¤ç”¨æœ€ä½³å®è·µ | çŸ¥è¯†æ²‰æ·€ |
| **æ™ºèƒ½æ¨è** | å‘ç°ç›¸å…³èƒ½åŠ› | æé«˜æ´»è·ƒåº¦ |
| **å›¢é˜Ÿåä½œ** | å…±äº«èµ„æºï¼Œæå‡æ•ˆç‡ | ä¼ä¸šçº§åº”ç”¨ |
| **æ¸¸æˆåŒ–** | æ¿€åŠ±å‚ä¸å’Œè´¡çŒ® | ç¤¾åŒºæ´»è·ƒ |

---

è¿™ä¸ªè®¾è®¡æ–‡æ¡£å®Œæ•´åœ°è§„åˆ’äº† LingNexus Platform çš„å‰ç«¯åŠŸèƒ½æ¶æ„ã€‚æ¥ä¸‹æ¥å¯ä»¥å¼€å§‹å®æ–½ï¼
